{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\gravitycareerinstitute\\\\frontend\\\\src\\\\components\\\\Login\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { getToken, storeToken } from \"../../services/LocalStorageService\";\nimport \"./login.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [inputField, setInputField] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [formError, setFormError] = useState({});\n  const navigate = useNavigate();\n\n  // useEffect(() => {\n  //   const auth = getToken(\"token\");\n  //   if (auth) {\n  //     // navigate(\"/\");\n  //   }\n  // });\n\n  const validateForm = () => {\n    let err = {};\n    if (inputField.email === \"\") {\n      err.email = \"Email required!\";\n    } else {\n      let regex = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n      if (!regex.test(inputField.email)) {\n        err.email = \"Email not valid!\";\n      }\n    }\n    if (inputField.password === \"\") {\n      err.password = \"Password required!\";\n    } else {\n      if (inputField.password.length < 6) {\n        err.password = \"Password should greater than 6 characters!\";\n      }\n    }\n    setFormError({\n      ...err\n    });\n    return Object.keys(err).length < 1;\n  };\n  const handleLogin = async () => {\n    console.warn(\"email, password\", inputField.email, inputField.password);\n    let result = await fetch(\"http://localhost:5000/api/user/login\", {\n      method: \"post\",\n      body: JSON.stringify({\n        ...inputField\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    result = await result.json();\n    console.warn(result);\n    let isValid = validateForm();\n    if (isValid) {\n      if (result.status === \"success\") {\n        storeToken(result.token);\n        navigate(\"/\");\n      }\n      if (result.status === \"failed\") {\n        setFormError({\n          status: true,\n          msg: result.message,\n          type: \"error\"\n        });\n      }\n      // if (!result.auth) {\n      //   storeToken(\"user\", JSON.stringify(result.user));\n      //   storeToken(\"token\", JSON.stringify(result.auth));\n      //   navigate(\"/\");\n      // } else {\n      //   alert(\"please enter correct details\");\n      // }\n      // alert(\"Submitted\");\n      // //API call to server\n    }\n\n    console.log(isValid);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \" align-items-center login\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"inputBox\",\n        type: \"email\",\n        placeholder: \"Enter Email\",\n        onChange: e => setInputField({\n          ...inputField,\n          [e.target.name]: e.target.value\n        }),\n        name: \"email\",\n        value: inputField.email,\n        autoComplete: \"email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"non-valid\",\n        children: formError.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"inputBox\",\n        type: \"password\",\n        placeholder: \"Enter Password\",\n        onChange: e => setInputField({\n          ...inputField,\n          [e.target.name]: e.target.value\n        }),\n        name: \"password\",\n        value: inputField.password,\n        autoComplete: \"new-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"non-valid\",\n        children: formError.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"inputButton\",\n        type: \"button\",\n        onClick: handleLogin,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"signup\",\n        children: [\"Looking to \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          children: \"create an account \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 22\n        }, this), \" ?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"non-valid\",\n        children: formError.msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"bFSaLXnhz+Pp4Ca1rUW2huQjUY0=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","getToken","storeToken","jsxDEV","_jsxDEV","Login","_s","inputField","setInputField","email","password","formError","setFormError","navigate","validateForm","err","regex","test","length","Object","keys","handleLogin","console","warn","result","fetch","method","body","JSON","stringify","headers","json","isValid","status","token","msg","message","type","log","children","fileName","_jsxFileName","lineNumber","columnNumber","className","placeholder","onChange","e","target","name","value","autoComplete","onClick","to","_c","$RefreshReg$"],"sources":["D:/project/gravitycareerinstitute/frontend/src/components/Login/Login.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { getToken, storeToken } from \"../../services/LocalStorageService\";\r\nimport \"./login.css\";\r\n\r\nconst Login = () => {\r\n  const [inputField, setInputField] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [formError, setFormError] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  // useEffect(() => {\r\n  //   const auth = getToken(\"token\");\r\n  //   if (auth) {\r\n  //     // navigate(\"/\");\r\n  //   }\r\n  // });\r\n\r\n  const validateForm = () => {\r\n    let err = {};\r\n\r\n    if (inputField.email === \"\") {\r\n      err.email = \"Email required!\";\r\n    } else {\r\n      let regex = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n      if (!regex.test(inputField.email)) {\r\n        err.email = \"Email not valid!\";\r\n      }\r\n    }\r\n\r\n    if (inputField.password === \"\") {\r\n      err.password = \"Password required!\";\r\n    } else {\r\n      if (inputField.password.length < 6) {\r\n        err.password = \"Password should greater than 6 characters!\";\r\n      }\r\n    }\r\n\r\n    setFormError({ ...err });\r\n\r\n    return Object.keys(err).length < 1;\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    console.warn(\"email, password\", inputField.email, inputField.password);\r\n    let result = await fetch(\"http://localhost:5000/api/user/login\", {\r\n      method: \"post\",\r\n      body: JSON.stringify({ ...inputField }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    result = await result.json();\r\n    console.warn(result);\r\n\r\n    let isValid = validateForm();\r\n\r\n    if (isValid) {\r\n      if (result.status === \"success\") {\r\n        storeToken(result.token);\r\n        navigate(\"/\");\r\n      }\r\n      if (result.status === \"failed\") {\r\n        setFormError({ status: true, msg: result.message, type: \"error\" });\r\n      }\r\n      // if (!result.auth) {\r\n      //   storeToken(\"user\", JSON.stringify(result.user));\r\n      //   storeToken(\"token\", JSON.stringify(result.auth));\r\n      //   navigate(\"/\");\r\n      // } else {\r\n      //   alert(\"please enter correct details\");\r\n      // }\r\n      // alert(\"Submitted\");\r\n      // //API call to server\r\n    }\r\n    console.log(isValid);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <br />\r\n\r\n      <form className=\" align-items-center login\">\r\n        <h1>Login</h1>\r\n        <input\r\n          className=\"inputBox\"\r\n          type={\"email\"}\r\n          placeholder=\"Enter Email\"\r\n          onChange={(e) =>\r\n            setInputField({\r\n              ...inputField,\r\n              [e.target.name]: e.target.value,\r\n            })\r\n          }\r\n          name=\"email\"\r\n          value={inputField.email}\r\n          autoComplete=\"email\"\r\n        />\r\n        <span className=\"non-valid\">{formError.email}</span>\r\n        <input\r\n          className=\"inputBox\"\r\n          type=\"password\"\r\n          placeholder=\"Enter Password\"\r\n          onChange={(e) =>\r\n            setInputField({\r\n              ...inputField,\r\n              [e.target.name]: e.target.value,\r\n            })\r\n          }\r\n          name=\"password\"\r\n          value={inputField.password}\r\n          autoComplete=\"new-password\"\r\n        />\r\n        <span className=\"non-valid\">{formError.password}</span>\r\n        <button className=\"inputButton\" type=\"button\" onClick={handleLogin}>\r\n          Login\r\n        </button>\r\n        <p className=\"signup\">\r\n          Looking to <Link to=\"/signup\">create an account </Link> ?\r\n        </p>\r\n\r\n        <p className=\"non-valid\">{formError.msg}</p>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}