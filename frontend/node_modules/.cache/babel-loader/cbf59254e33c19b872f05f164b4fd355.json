{"ast":null,"code":"import _defineProperty from\"D:/project/gravitycareerinstitute/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"D:/project/gravitycareerinstitute/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/project/gravitycareerinstitute/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"D:/project/gravitycareerinstitute/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/project/gravitycareerinstitute/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{getToken,storeToken}from\"../../services/LocalStorageService\";import\"./login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),inputField=_useState2[0],setInputField=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formError=_useState4[0],setFormError=_useState4[1];var navigate=useNavigate();// useEffect(() => {\n//   const auth = getToken(\"token\");\n//   if (auth) {\n//     // navigate(\"/\");\n//   }\n// });\nvar validateForm=function validateForm(){var err={};if(inputField.email===\"\"){err.email=\"Email required!\";}else{var regex=/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;if(!regex.test(inputField.email)){err.email=\"Email not valid!\";}}if(inputField.password===\"\"){err.password=\"Password required!\";}else{if(inputField.password.length<6){err.password=\"Password should greater than 6 characters!\";}}setFormError(_objectSpread({},err));return Object.keys(err).length<1;};var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result,isValid;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.warn(\"email, password\",inputField.email,inputField.password);_context.next=3;return fetch(\"http://localhost:5000/api/user/login\",{method:\"post\",body:JSON.stringify(_objectSpread({},inputField)),headers:{\"Content-Type\":\"application/json\"}});case 3:result=_context.sent;_context.next=6;return result.json();case 6:result=_context.sent;console.warn(result);isValid=validateForm();if(isValid){if(result.status===\"success\"){storeToken(result.token);navigate(\"/\");}if(result.status===\"failed\"){setFormError({status:true,msg:result.message,type:\"error\"});}// if (!result.auth) {\n//   storeToken(\"user\", JSON.stringify(result.user));\n//   storeToken(\"token\", JSON.stringify(result.auth));\n//   navigate(\"/\");\n// } else {\n//   alert(\"please enter correct details\");\n// }\n// alert(\"Submitted\");\n// //API call to server\n}console.log(isValid);case 11:case\"end\":return _context.stop();}},_callee);}));return function handleLogin(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\" align-items-center login\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputBox\",type:\"email\",placeholder:\"Enter Email\",onChange:function onChange(e){return setInputField(_objectSpread(_objectSpread({},inputField),{},_defineProperty({},e.target.name,e.target.value)));},name:\"email\",value:inputField.email,autoComplete:\"email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"non-valid\",children:formError.email}),/*#__PURE__*/_jsx(\"input\",{className:\"inputBox\",type:\"password\",placeholder:\"Enter Password\",onChange:function onChange(e){return setInputField(_objectSpread(_objectSpread({},inputField),{},_defineProperty({},e.target.name,e.target.value)));},name:\"password\",value:inputField.password,autoComplete:\"new-password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"non-valid\",children:formError.password}),/*#__PURE__*/_jsx(\"button\",{className:\"inputButton\",type:\"button\",onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"signup\",children:[\"Looking to \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"create an account \"}),\" ?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"non-valid\",children:formError.msg})]})]});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","getToken","storeToken","jsx","_jsx","jsxs","_jsxs","Login","_useState","email","password","_useState2","_slicedToArray","inputField","setInputField","_useState3","_useState4","formError","setFormError","navigate","validateForm","err","regex","test","length","_objectSpread","Object","keys","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","isValid","wrap","_callee$","_context","prev","next","console","warn","fetch","method","body","JSON","stringify","headers","sent","json","status","token","msg","message","type","log","stop","apply","arguments","children","className","placeholder","onChange","e","_defineProperty","target","name","value","autoComplete","onClick","to"],"sources":["D:/project/gravitycareerinstitute/frontend/src/components/Login/Login.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { getToken, storeToken } from \"../../services/LocalStorageService\";\r\nimport \"./login.css\";\r\n\r\nconst Login = () => {\r\n  const [inputField, setInputField] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [formError, setFormError] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  // useEffect(() => {\r\n  //   const auth = getToken(\"token\");\r\n  //   if (auth) {\r\n  //     // navigate(\"/\");\r\n  //   }\r\n  // });\r\n\r\n  const validateForm = () => {\r\n    let err = {};\r\n\r\n    if (inputField.email === \"\") {\r\n      err.email = \"Email required!\";\r\n    } else {\r\n      let regex = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n      if (!regex.test(inputField.email)) {\r\n        err.email = \"Email not valid!\";\r\n      }\r\n    }\r\n\r\n    if (inputField.password === \"\") {\r\n      err.password = \"Password required!\";\r\n    } else {\r\n      if (inputField.password.length < 6) {\r\n        err.password = \"Password should greater than 6 characters!\";\r\n      }\r\n    }\r\n\r\n    setFormError({ ...err });\r\n\r\n    return Object.keys(err).length < 1;\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    console.warn(\"email, password\", inputField.email, inputField.password);\r\n    let result = await fetch(\"http://localhost:5000/api/user/login\", {\r\n      method: \"post\",\r\n      body: JSON.stringify({ ...inputField }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    result = await result.json();\r\n    console.warn(result);\r\n\r\n    let isValid = validateForm();\r\n\r\n    if (isValid) {\r\n      if (result.status === \"success\") {\r\n        storeToken(result.token);\r\n        navigate(\"/\");\r\n      }\r\n      if (result.status === \"failed\") {\r\n        setFormError({ status: true, msg: result.message, type: \"error\" });\r\n      }\r\n      // if (!result.auth) {\r\n      //   storeToken(\"user\", JSON.stringify(result.user));\r\n      //   storeToken(\"token\", JSON.stringify(result.auth));\r\n      //   navigate(\"/\");\r\n      // } else {\r\n      //   alert(\"please enter correct details\");\r\n      // }\r\n      // alert(\"Submitted\");\r\n      // //API call to server\r\n    }\r\n    console.log(isValid);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <br />\r\n\r\n      <form className=\" align-items-center login\">\r\n        <h1>Login</h1>\r\n        <input\r\n          className=\"inputBox\"\r\n          type={\"email\"}\r\n          placeholder=\"Enter Email\"\r\n          onChange={(e) =>\r\n            setInputField({\r\n              ...inputField,\r\n              [e.target.name]: e.target.value,\r\n            })\r\n          }\r\n          name=\"email\"\r\n          value={inputField.email}\r\n          autoComplete=\"email\"\r\n        />\r\n        <span className=\"non-valid\">{formError.email}</span>\r\n        <input\r\n          className=\"inputBox\"\r\n          type=\"password\"\r\n          placeholder=\"Enter Password\"\r\n          onChange={(e) =>\r\n            setInputField({\r\n              ...inputField,\r\n              [e.target.name]: e.target.value,\r\n            })\r\n          }\r\n          name=\"password\"\r\n          value={inputField.password}\r\n          autoComplete=\"new-password\"\r\n        />\r\n        <span className=\"non-valid\">{formError.password}</span>\r\n        <button className=\"inputButton\" type=\"button\" onClick={handleLogin}>\r\n          Login\r\n        </button>\r\n        <p className=\"signup\">\r\n          Looking to <Link to=\"/signup\">create an account </Link> ?\r\n        </p>\r\n\r\n        <p className=\"non-valid\">{formError.msg}</p>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}